import{a as mt}from"./chunk-XW2SFMWK.js";import{a as I}from"./chunk-O35C6DU6.js";import{a as K,c as Q,d as X}from"./chunk-WJDLDAYU.js";import{a as it,b as ot}from"./chunk-PSIDBIZF.js";import"./chunk-3X5RHMPT.js";import{A as W,D as Y,b as E,d as u,f as O,g as R,i as B,k as T,l as N,n as A,o as L,p as G,q as j,r as q,s as V,t as D,u as U,v as z,x as H,y as J}from"./chunk-IEZEXGYZ.js";import{Aa as p,Ac as Z,Cb as b,Cc as $,Dc as tt,E as x,Ea as g,Eb as ct,Ec as et,Fc as rt,Gb as k,Hb as F,Kb as f,Ta as i,Ua as C,Va as P,_ as a,ca as d,ga as w,ha as S,la as c,ra as M,xa as m,xb as y,ya as r,za as e}from"./chunk-MQ32LSW5.js";function Pt(o,n){o&1&&(r(0,"mat-error"),i(1," Username is required "),e())}function yt(o,n){o&1&&(r(0,"mat-error"),i(1," Username must be at least 3 characters long "),e())}function kt(o,n){o&1&&(r(0,"mat-error"),i(1," Password is required "),e())}function Ft(o,n){o&1&&(r(0,"mat-error"),i(1," Password must be at least 6 characters long "),e())}var nt=class o{constructor(n,s,t,l,h){this.fb=n;this.authService=s;this.router=t;this.route=l;this.snackBar=h;this.loginForm=this.createForm()}loginForm;isSubmitting=!1;hidePassword=!0;ngOnInit(){this.authService.isLoggedIn()&&this.router.navigate(["/dashboard"]),this.route.queryParams.subscribe(n=>{n.message==="session-expired"&&(this.snackBar.open("Your session has expired. Please log in again.","Close",{duration:5e3,panelClass:["error-snackbar"]}),this.router.navigate([],{queryParams:{}}))})}createForm(){return this.fb.group({username:["",[u.required,u.minLength(3)]],password:["",[u.required,u.minLength(6)]]})}onSubmit(){if(this.loginForm.valid){this.isSubmitting=!0;let{username:n,password:s}=this.loginForm.value;this.authService.login(n,s).subscribe({next:t=>{if(t){this.snackBar.open("Login successful!","Close",{duration:3e3,panelClass:["success-snackbar"]});let l=localStorage.getItem("returnUrl")||"/dashboard";localStorage.removeItem("returnUrl"),this.router.navigateByUrl(l)}else this.snackBar.open("Invalid username or password","Close",{duration:3e3,panelClass:["error-snackbar"]}),this.isSubmitting=!1},error:()=>{this.snackBar.open("An error occurred during login","Close",{duration:3e3,panelClass:["error-snackbar"]}),this.isSubmitting=!1}})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.loginForm.controls).forEach(n=>{this.loginForm.get(n)?.markAsTouched()})}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}static \u0275fac=function(s){return new(s||o)(d(A),d(I),d(k),d(ct),d(it))};static \u0275cmp=w({type:o,selectors:[["app-login"]],decls:38,vars:11,consts:[[1,"auth-container"],[1,"auth-content"],[1,"auth-card"],[1,"auth-title"],[1,"auth-icon"],[1,"auth-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","placeholder","Enter your username"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Enter your password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"auth-submit-button",3,"disabled"],[1,"auth-actions"],[1,"auth-link-text"],["routerLink","/auth/register",1,"auth-link"]],template:function(s,t){if(s&1&&(r(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title",3)(5,"mat-icon",4),i(6,"event"),e(),i(7," Welcome to EventHub "),e(),r(8,"mat-card-subtitle"),i(9," Sign in to manage your events "),e()(),r(10,"mat-card-content")(11,"form",5),g("ngSubmit",function(){return t.onSubmit()}),r(12,"mat-form-field",6)(13,"mat-label"),i(14,"Username"),e(),p(15,"input",7),r(16,"mat-icon",8),i(17,"person"),e(),c(18,Pt,2,0,"mat-error",9)(19,yt,2,0,"mat-error",9),e(),r(20,"mat-form-field",6)(21,"mat-label"),i(22,"Password"),e(),p(23,"input",10),r(24,"button",11),g("click",function(){return t.togglePasswordVisibility()}),r(25,"mat-icon"),i(26),e()(),c(27,kt,2,0,"mat-error",9)(28,Ft,2,0,"mat-error",9),e(),r(29,"button",12)(30,"mat-icon"),i(31,"login"),e(),i(32),e()()(),r(33,"mat-card-actions",13)(34,"p",14),i(35," Don't have an account? "),r(36,"a",15),i(37,"Register here"),e()()()()()()),s&2){let l,h,v,_;a(11),m("formGroup",t.loginForm),a(7),m("ngIf",(l=t.loginForm.get("username"))==null?null:l.hasError("required")),a(),m("ngIf",(h=t.loginForm.get("username"))==null?null:h.hasError("minlength")),a(4),m("type",t.hidePassword?"password":"text"),a(),M("aria-label","Hide password")("aria-pressed",t.hidePassword),a(2),C(t.hidePassword?"visibility_off":"visibility"),a(),m("ngIf",(v=t.loginForm.get("password"))==null?null:v.hasError("required")),a(),m("ngIf",(_=t.loginForm.get("password"))==null?null:_.hasError("minlength")),a(),m("disabled",t.loginForm.invalid||t.isSubmitting),a(3),P(" ",t.isSubmitting?"Signing In...":"Sign In"," ")}},dependencies:[b,y,L,B,E,O,R,T,N,f,F,z,G,D,q,U,V,j,K,Y,H,J,W,X,Q,tt,$,Z,rt,et,ot],styles:[".auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.auth-content[_ngcontent-%COMP%]{width:100%;max-width:400px}.auth-card[_ngcontent-%COMP%]{box-shadow:0 8px 32px #0000001a;border-radius:16px!important;overflow:hidden}.auth-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:1.5rem;font-weight:600;color:#333;margin-bottom:8px}.auth-icon[_ngcontent-%COMP%]{color:#3f51b5;font-size:2rem;width:2rem;height:2rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:20px 0}.full-width[_ngcontent-%COMP%]{width:100%}.auth-submit-button[_ngcontent-%COMP%]{height:48px;font-size:1rem;font-weight:500;margin-top:10px;border-radius:8px!important}.auth-submit-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.auth-actions[_ngcontent-%COMP%]{padding:16px 24px;background-color:#f8f9fa;text-align:center}.auth-link-text[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.9rem}.auth-link[_ngcontent-%COMP%]{color:#3f51b5;text-decoration:none;font-weight:500}.auth-link[_ngcontent-%COMP%]:hover{text-decoration:underline}  .mat-mdc-form-field .mat-mdc-text-field-wrapper{border-radius:8px}  .success-snackbar{background-color:#4caf50!important;color:#fff!important}  .error-snackbar{background-color:#f44336!important;color:#fff!important}@media (max-width: 480px){.auth-container[_ngcontent-%COMP%]{padding:10px}.auth-card[_ngcontent-%COMP%]{margin:0}.auth-title[_ngcontent-%COMP%]{font-size:1.25rem}}"]})};function It(o,n){o&1&&(r(0,"mat-error"),i(1," Username is required "),e())}function Et(o,n){o&1&&(r(0,"mat-error"),i(1," Username must be at least 3 characters long "),e())}function Ot(o,n){o&1&&(r(0,"mat-error"),i(1," Password is required "),e())}function Rt(o,n){o&1&&(r(0,"mat-error"),i(1," Password must be at least 6 characters long "),e())}function Bt(o,n){o&1&&(r(0,"mat-error"),i(1," Please confirm your password "),e())}function Tt(o,n){o&1&&(r(0,"mat-error"),i(1," Passwords do not match "),e())}var at=class o{constructor(n,s,t,l){this.fb=n;this.authService=s;this.router=t;this.snackBar=l;this.registerForm=this.createForm()}registerForm;isSubmitting=!1;hidePassword=!0;hideConfirmPassword=!0;ngOnInit(){this.authService.isLoggedIn()&&this.router.navigate(["/dashboard"])}createForm(){return this.fb.group({username:["",[u.required,u.minLength(3)]],password:["",[u.required,u.minLength(6)]],confirmPassword:["",[u.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(n){let s=n.get("password"),t=n.get("confirmPassword");return s&&t&&s.value!==t.value?t.setErrors({passwordMismatch:!0}):t?.hasError("passwordMismatch")&&t.setErrors(null),null}onSubmit(){if(this.registerForm.valid){this.isSubmitting=!0;let{username:n,password:s}=this.registerForm.value;this.authService.register({username:n,password:s}).subscribe({next:t=>{t?(this.snackBar.open("Registration successful! Please sign in.","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.router.navigate(["/auth/login"])):(this.snackBar.open("Username already exists. Please choose a different username.","Close",{duration:3e3,panelClass:["error-snackbar"]}),this.isSubmitting=!1)},error:()=>{this.snackBar.open("An error occurred during registration","Close",{duration:3e3,panelClass:["error-snackbar"]}),this.isSubmitting=!1}})}else this.markFormGroupTouched()}markFormGroupTouched(){Object.keys(this.registerForm.controls).forEach(n=>{this.registerForm.get(n)?.markAsTouched()})}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}toggleConfirmPasswordVisibility(){this.hideConfirmPassword=!this.hideConfirmPassword}static \u0275fac=function(s){return new(s||o)(d(A),d(I),d(k),d(it))};static \u0275cmp=w({type:o,selectors:[["app-register"]],decls:47,vars:17,consts:[[1,"auth-container"],[1,"auth-content"],[1,"auth-card"],[1,"auth-title"],[1,"auth-icon"],[1,"auth-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","username","placeholder","Choose a username"],["matSuffix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Create a password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","formControlName","confirmPassword","placeholder","Confirm your password",3,"type"],["mat-raised-button","","color","primary","type","submit",1,"auth-submit-button",3,"disabled"],[1,"auth-actions"],[1,"auth-link-text"],["routerLink","/auth/login",1,"auth-link"]],template:function(s,t){if(s&1&&(r(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title",3)(5,"mat-icon",4),i(6,"person_add"),e(),i(7," Join EventHub "),e(),r(8,"mat-card-subtitle"),i(9," Create your account to start managing events "),e()(),r(10,"mat-card-content")(11,"form",5),g("ngSubmit",function(){return t.onSubmit()}),r(12,"mat-form-field",6)(13,"mat-label"),i(14,"Username"),e(),p(15,"input",7),r(16,"mat-icon",8),i(17,"person"),e(),c(18,It,2,0,"mat-error",9)(19,Et,2,0,"mat-error",9),e(),r(20,"mat-form-field",6)(21,"mat-label"),i(22,"Password"),e(),p(23,"input",10),r(24,"button",11),g("click",function(){return t.togglePasswordVisibility()}),r(25,"mat-icon"),i(26),e()(),c(27,Ot,2,0,"mat-error",9)(28,Rt,2,0,"mat-error",9),e(),r(29,"mat-form-field",6)(30,"mat-label"),i(31,"Confirm Password"),e(),p(32,"input",12),r(33,"button",11),g("click",function(){return t.toggleConfirmPasswordVisibility()}),r(34,"mat-icon"),i(35),e()(),c(36,Bt,2,0,"mat-error",9)(37,Tt,2,0,"mat-error",9),e(),r(38,"button",13)(39,"mat-icon"),i(40,"person_add"),e(),i(41),e()()(),r(42,"mat-card-actions",14)(43,"p",15),i(44," Already have an account? "),r(45,"a",16),i(46,"Sign in here"),e()()()()()()),s&2){let l,h,v,_,dt,ut;a(11),m("formGroup",t.registerForm),a(7),m("ngIf",(l=t.registerForm.get("username"))==null?null:l.hasError("required")),a(),m("ngIf",(h=t.registerForm.get("username"))==null?null:h.hasError("minlength")),a(4),m("type",t.hidePassword?"password":"text"),a(),M("aria-label","Hide password")("aria-pressed",t.hidePassword),a(2),C(t.hidePassword?"visibility_off":"visibility"),a(),m("ngIf",(v=t.registerForm.get("password"))==null?null:v.hasError("required")),a(),m("ngIf",(_=t.registerForm.get("password"))==null?null:_.hasError("minlength")),a(4),m("type",t.hideConfirmPassword?"password":"text"),a(),M("aria-label","Hide confirm password")("aria-pressed",t.hideConfirmPassword),a(2),C(t.hideConfirmPassword?"visibility_off":"visibility"),a(),m("ngIf",(dt=t.registerForm.get("confirmPassword"))==null?null:dt.hasError("required")),a(),m("ngIf",(ut=t.registerForm.get("confirmPassword"))==null?null:ut.hasError("passwordMismatch")),a(),m("disabled",t.registerForm.invalid||t.isSubmitting),a(3),P(" ",t.isSubmitting?"Creating Account...":"Create Account"," ")}},dependencies:[b,y,L,B,E,O,R,T,N,f,F,z,G,D,q,U,V,j,K,Y,H,J,W,X,Q,tt,$,Z,rt,et,ot],styles:[".auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.auth-content[_ngcontent-%COMP%]{width:100%;max-width:400px}.auth-card[_ngcontent-%COMP%]{box-shadow:0 8px 32px #0000001a;border-radius:16px!important;overflow:hidden}.auth-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:1.5rem;font-weight:600;color:#333;margin-bottom:8px}.auth-icon[_ngcontent-%COMP%]{color:#3f51b5;font-size:2rem;width:2rem;height:2rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:20px 0}.full-width[_ngcontent-%COMP%]{width:100%}.auth-submit-button[_ngcontent-%COMP%]{height:48px;font-size:1rem;font-weight:500;margin-top:10px;border-radius:8px!important}.auth-submit-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.auth-actions[_ngcontent-%COMP%]{padding:16px 24px;background-color:#f8f9fa;text-align:center}.auth-link-text[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.9rem}.auth-link[_ngcontent-%COMP%]{color:#3f51b5;text-decoration:none;font-weight:500}.auth-link[_ngcontent-%COMP%]:hover{text-decoration:underline}  .mat-mdc-form-field .mat-mdc-text-field-wrapper{border-radius:8px}  .success-snackbar{background-color:#4caf50!important;color:#fff!important}  .error-snackbar{background-color:#f44336!important;color:#fff!important}@media (max-width: 480px){.auth-container[_ngcontent-%COMP%]{padding:10px}.auth-card[_ngcontent-%COMP%]{margin:0}.auth-title[_ngcontent-%COMP%]{font-size:1.25rem}}"]})};var Nt=[{path:"login",component:nt,canActivate:[mt]},{path:"register",component:at,canActivate:[mt]},{path:"",redirectTo:"login",pathMatch:"full"}],st=class o{static \u0275fac=function(s){return new(s||o)};static \u0275mod=S({type:o});static \u0275inj=x({imports:[f.forChild(Nt),f]})};var pt=class o{static \u0275fac=function(s){return new(s||o)};static \u0275mod=S({type:o});static \u0275inj=x({imports:[b,st]})};export{pt as AuthModule};
